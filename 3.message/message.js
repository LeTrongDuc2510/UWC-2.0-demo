let duc_flag = false;
let duc_msg = [
                    ["T2 23:51", "center"],
                    ["Mai c√≥ ƒëi h·ªçc kh√¥ng", "left"],
                    ["C√≥ ch·ª©", "right"],
                    ["Tr∆∞a ƒÉn chung nhe", "left"],
                    ["Okee", "right"],
                    ["Oke", "left"],
                    ["Ng·ªß ngon", "left"],
                    ["10:53", "center"],
                    ["Tr∆∞a nay ƒÉn g√¨ √°", "left"],
                    ["Foodcourt B4 ha", "right"],
                    [":))", "right"],
                    [":)", "left"],
                    ["Hadilao ƒëi", "left"],
                    ["Tui bao", "left"],
];

let tuan_msg = [
                    ["T2 00:00", "center"],
                    ["ƒê√°nh c·ªù vua hong", "left"],
                    ["G·ª≠i link ƒëi", "right"],
                    ["https://www.facebook.com/khoituan65", "left"],
                    ["Link g√¨ ƒë·∫•y :)))))", "right"],
                    ["Link ng∆∞·ªùi ƒë·∫πp trai", "left"],
                    ["Th√¥i ƒëi code btl SE", "right"],
                    ["T3 03:00", "center"],
                    ["Ng·ªß ƒëi :)))))", "right"],
                    ["S√°ng ƒëi ƒë√°nh c·∫ßu", "right"],
                    ["ƒêau b·ª•ng", "left"],
                    ["S·ªßi qu√†i :))))))", "right"],
];

let khanh_msg = [
                    ["T3 01:00", "center"],
                    ["Sao ch∆∞a ng·ªß", "left"],
                    ["Code √≠t th√¥i", "left"],
                    [":))))", "left"],
                    ["Code g√¨ :)))))", "right"],
                    ["L√†m cho xong btl SE n√®", "right"],
                    ["G√°nh Tr√≠ c√≤ng l∆∞ng", "right"],
];

let tri_msg = [
                    ["T3 11:33", "center"],
                    ["Code ph·∫ßn tin nh·∫Øn ch∆∞a", "right"],
                    ["L√¢u qu√°", "right"],
                    ["T4 5:43", "center"],
                    ["seen", "left"],
                    ["T4 10:27", "center"],
                    ["L√†m l·∫π ƒëi", "right"],
                    ["Kick gi·ªù", "right"],
                    ["üò°", "right"],
                    ["10:53", "center"],
                    ["L√†m gi√πm ƒëi", "left"],
                    ["L∆∞·ªùi qu√≥", "left"],
                    ["Okee ƒë·ªÉ D≈©ng l√†m cho", "right"],
                    ["D·ªÖ th∆∞∆°ng z", "left"],
];

let amee_msg = [
                    ["1 th√°ng tr∆∞·ªõc", "center"],
                    ["Sao h√¥m nay l·∫°i c·ª© ng·∫©n ng∆° th·∫ø n√†y", "left"],
                    ["Sao m√† b√¢y gi·ªù ƒë√¢y v≈© tr·ª• em ch·ªâ th·∫•y anh th√¥i ƒë·∫•y", "left"],
                    ["B·∫Øt ƒë·ªÅn ƒëi tr·∫£ l·∫°i t√¢m tr√≠ ƒë√¢y", "left"],
                    ["Meo meo meo meo tr·∫£ l·∫°i t√¢m tr√≠ t√¥i ƒë√¢y", "left"],
                    ["???", "right"],
                    ["C·ª© nh∆∞ m√®o con t·∫Øm n·∫Øng trong khu v∆∞·ªùn nh√†", "left"],
                    ["R·∫•t trong l√†nh c√≥ ong l√≤ng em c√≥ anh", "left"],
                    ["M·ªõi ch·ªâ ƒë∆∞·ª£c g·∫∑p anh m·ªói l√∫c ban chi·ªÅu l√† ∆∞ng", "left"],
                    ["Qu√° ch·ª´ng l√≤ng em c·ª© t∆∞ng t·ª©ng t∆∞ng t∆∞ng", "left"],
                    ["M·ªõi ƒë√¢y", "center"],
                    ["Meo meo meo meo...", "left"],
]

let tindang_msg = [ 
                    ["M·ªõi ƒë√¢y", "center"],
                    ["Tr·∫£ l·∫°i t√¢m tr√≠ toi ƒëaayy...", "left"],
]

let hieuthuhai_msg = [
                    ["17 th√°ng 11, 2022", "center"],
                    ["H√£y ·ªü l·∫°i v·ªõi anh th√™m m·ªôt ng√†y n·ªØa th√¥i", "left"],
                    ["V√¨ anh kh√¥ng mu·ªën ph·∫£i ng·ªß m·ªôt m√¨nh ƒë√™m nay ƒë√¢u", "left"],
                    ["B√™n ngo√†i v√† u·ªëng say hay l√† ta n·∫±m ƒë√¢y c·∫£ ƒë√™m", "left"],
                    ["Ch·ªâ l√† anh kh√¥ng mu·ªën ph·∫£i ng·ªß m·ªôt m√¨nh ƒë√™m nay", "left"],
                    ["???", "right"],
                    ["Yeah yeah", "left"],
                    ["Baby n√≥i cho anh nghe em h√£y n√≥i cho anh nghe nh·ªØng ƒëi·ªÅu m√†", "left"],
]

let thimau_msg = [
                    ["17 th√°ng 11, 2022", "center"],
                    ["N√†y th·∫ßy ti·ªÉu ∆°i", "left"],
                    ["Em l√† Th·ªã M·∫ßu", "left"],
                    ["Em kh√¥ng bi·∫øt ƒë√¢u", "left"],
                    ["Em c·ª© b·∫Øt ƒë·ªÅn", "left"],
                    ["G·ªçi m·∫π th∆∞a cha", "left"],
                    ["ƒÇn v·∫° c·∫£ l√†ng", "left"],
                    ["Cho em l·∫•y ch√†ng", "left"],
                    ["T√¨nh tang tang t√¨nh t√¨nh tang", "left"],
                    ["B·ªõi l√†ng n∆∞·ªõc ∆°i!!!!!!", "right"],
]

let detail_msg = document.querySelector(".detail__msg");
function scroll() {
    detail_msg.scrollTop = detail_msg.scrollHeight;
}

function create_msg (str, position) {
    let new_msg = document.createElement('p');
    new_msg.setAttribute("class", position);
    new_msg.innerHTML = str;

    let msg_element = document.createElement('div');
    msg_element.setAttribute("class", "msg__element");
    msg_element.appendChild(new_msg);

    return msg_element;
}

function send() {
    var msg = document.querySelector(".detail__input").value;

        if (msg == undefined || msg == ""){

        }
        else {
            detail_msg.appendChild(create_msg(msg, "right"));   
            scroll();

            let detail_user_name = document.querySelector(".detail__user--name");
            let ptr = duc_msg;
            if (detail_user_name.innerHTML === "L√™ Tr·ªçng ƒê·ª©c") {
                ptr = duc_msg;
            }
            else if (detail_user_name.innerHTML === "Kh√¥i Tu·∫•n"){
                ptr = tuan_msg;
            }
            else if (detail_user_name.innerHTML === "ƒêƒÉng Kh√°nh"){
                ptr = khanh_msg;
            }
            else if (detail_user_name.innerHTML === "Tr√≠ Cao Ch√°nh"){
                ptr = tri_msg;
            }
            else if (detail_user_name.innerHTML === "Amee"){
                ptr = amee_msg;
            }
            else if (detail_user_name.innerHTML === "T√≠n ƒê·∫∑ng"){
                ptr = tindang_msg;
            }
            else if (detail_user_name.innerHTML === "Hieuthuhai"){
                ptr = hieuthuhai_msg;
            }
            else if (detail_user_name.innerHTML === "Th·ªã M·∫ßu"){
                ptr = thimau_msg;
            }
            
            // detail_msg.appendChild(create_msg("Now", "center"));   
            ptr.push([msg, "right"]);
        }

        document.querySelector(".detail__input").value = "";
}

document.querySelector(".send-icon").addEventListener(
    "click", async (e) => {
        e.preventDefault();
        send();    
    }
);

document.querySelector('.detail__input').addEventListener(
    'keypress', async (e) => {
    if (e.key === 'Enter') {
        send();
    }
});

function get_msg(messages) {
    detail_msg.innerHTML = "";

    for (let i = 0; i < messages.length; i++) {
        detail_msg.appendChild(create_msg(messages[i][0], messages[i][1]));
    }
}

document.querySelectorAll(".elements").forEach(item => {
    item.addEventListener(
        "click", async (e) => {
            e.preventDefault();
            let avatar = item.getElementsByClassName("elements__avata")[0];
            let detail_user_avatar = document.querySelector(".detail__user--avata");
            detail_user_avatar.src = avatar.src;

            let name = item.getElementsByClassName("elements__name")[0];
            let detail_user_name = document.querySelector(".detail__user--name");
            detail_user_name.innerHTML = name.innerHTML;

            if (name.innerHTML === "L√™ Tr·ªçng ƒê·ª©c (#JN8484)") {
                get_msg(duc_msg);
            }
            else if (name.innerHTML === "Kh√¥i Tu·∫•n (#JN2334)") {
                get_msg(tuan_msg);
            }
            else if (name.innerHTML === "ƒêƒÉng Kh√°nh (#CL4731)") {
                get_msg(khanh_msg);
            }
            else if (name.innerHTML === "Ch√°nh Tr√≠ (#CL7367)") {
                get_msg(tri_msg);
            }
            else if (name.innerHTML === "ƒê√†m H∆∞ng (#JN4589)") {
                get_msg(amee_msg);
            }
            else if (name.innerHTML === "H·ªì Th·ªã Hi·ªÅn (#CL6363)") {
                get_msg(tindang_msg);
            }
            else if (name.innerHTML === "Ho√†i Linh (#JN3475)") {
                get_msg(hieuthuhai_msg);
            }
            else if (name.innerHTML === "Tr·∫•n Th√†nh (#JN7693)") {
                get_msg(thimau_msg);
            }


            scroll();
        }
    )
})
